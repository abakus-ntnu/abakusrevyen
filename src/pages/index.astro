---
import Live from "./periode/live.astro";
import Opptak from "./periode/opptak.astro";
import Pause from "./periode/pause.astro";

const periods: { period: Period; from: Date }[] = [
  { from: new Date(2025, 7, 15), period: "recruitment" },
  { from: new Date(2025, 8, 15), period: "showStarting" },
  { from: new Date(2025, 2, 10), period: "showCurrent" },
  { from: new Date(2025, 2, 17), period: "pause" },
];

type Period = "recruitment" | "showStarting" | "showCurrent" | "pause";

function getCurrentPeriod(): Period {
  let now = new Date();

  for (let period of periods.slice().reverse()) {
    if (period.from <= now) {
      return period.period;
    }
  }

  return "pause";
}

const period = getCurrentPeriod();
---

{
  period == "pause" ? (
    <Pause />
  ) : period == "recruitment" ? (
    <Opptak />
  ) : (
    <Live />
  )
}
