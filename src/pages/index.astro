---
import Live from "./periode/live.astro";
import Nedtelling from "./periode/nedtelling.astro";
import Opptak from "./periode/opptak.astro";
import Pause from "./periode/pause.astro";

const RECRUITMENT_START = new Date(2024, 7, 15);
const RECRUITMENT_END = new Date(2024, 8, 15);
const SHOW_START = new Date(2025, 2, 10);
const SHOW_END = new Date(2025, 2, 17);

const periods: { period: Period; from: Date }[] = [
  { from: RECRUITMENT_START, period: "recruitment" },
  { from: RECRUITMENT_END, period: "showStarting" },
  { from: SHOW_START, period: "showCurrent" },
  { from: SHOW_END, period: "pause" },
];

type Period = "recruitment" | "showStarting" | "showCurrent" | "pause";

function getCurrentPeriod(): Period {
  let now = new Date();

  for (let period of periods.slice().reverse()) {
    if (period.from <= now) {
      return period.period;
    }
  }

  return "pause";
}

const period = getCurrentPeriod();
---

{
  period == "pause" ? (
    <Pause />
  ) : period == "recruitment" ? (
    <Opptak />
  ) : period == "showCurrent" ? (
    <Live />
  ) : (
    <Nedtelling to={SHOW_START} />
  )
}
