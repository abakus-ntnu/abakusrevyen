---
import Card from "../Card/Card.astro";

import { Clock, MapPin, Ticket } from "lucide-astro";

import { getCalenderURL } from "@/lib/calender";
import LinkButton from "../LinkButton/LinkButton.astro";

interface Props {
  where?: string;
  when: Date | string;
}

const { where = "Byscenen, Trondheim", when } = Astro.props;

let whenText;

if (typeof when === "string") {
  whenText = when;
} else {
  const today = new Date();
  const isToday =
    today.getDay() == when.getDay() &&
    today.getMonth() == when.getMonth() &&
    today.getFullYear() == when.getFullYear();

  if (isToday) {
    whenText =
      "Idag fra kl. " +
      when.toLocaleString("no-NB", {
        hour: "numeric",
        minute: "2-digit",
      });
  } else {
    whenText = when.toLocaleString("no-NB", {
      year: "numeric",
      month: "long",
      day: "numeric",
    });
  }
}
---

<Card class="bg-primary !border-0 text-white">
  <div class="grid md:grid-cols-3 grid-cols-1 gap-10 px-8 pt-4 pb-6">
    <div class="flex flex-col gap-2">
      <span>Hvor</span>
      <LinkButton
        href="https://maps.app.goo.gl/dyYedVyzZWbPpbVQ8"
        class="flex gap-3 shadow-md"
      >
        <MapPin />{where}
      </LinkButton>
    </div>

    <div class="flex flex-col gap-2">
      <span>Når</span>
      <LinkButton href={getCalenderURL()} class="flex gap-3 hover:shadow-md">
        <Clock />{whenText}</LinkButton
      >
    </div>

    <div class="flex flex-col gap-2">
      <span>Kjøp bilett</span>
      <LinkButton
        href="https://vier.live/c/abakusrevyen"
        class="flex gap-3 hover:shadow-md"
      >
        <Ticket />Ticketmaster</LinkButton
      >
    </div>
  </div>
</Card>
